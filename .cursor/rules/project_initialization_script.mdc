---
description: ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ ì¼ê´€ëœ ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ ë° ì›Œí¬í”Œë¡œìš°
globs: **/*
alwaysApply: true
---

# í”„ë¡œì íŠ¸ ì´ˆê¸°í™” ìë™í™” ìŠ¤í¬ë¦½íŠ¸

## ğŸš€ í†µí•© í”„ë¡œì íŠ¸ ì´ˆê¸°í™” ì›Œí¬í”Œë¡œìš°

### 1. **í”„ë¡œì íŠ¸ íƒ€ì…ë³„ ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸**

#### FastAPI í”„ë¡œì íŠ¸ ì´ˆê¸°í™”
```bash
#!/bin/bash
# fastapi-init.sh

PROJECT_NAME=$1
PROJECT_TYPE="fastapi"

if [ -z "$PROJECT_NAME" ]; then
    echo "âŒ ì‚¬ìš©ë²•: ./fastapi-init.sh <í”„ë¡œì íŠ¸ëª…>"
    exit 1
fi

echo "ğŸš€ FastAPI í”„ë¡œì íŠ¸ '$PROJECT_NAME' ì´ˆê¸°í™”ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤..."

# 1. í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ ìƒì„± ë° ì´ë™
mkdir -p "$PROJECT_NAME"
cd "$PROJECT_NAME"

# 2. Git ì´ˆê¸°í™” (í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ)
git init
git config user.name "$(git config --global user.name)"
git config user.email "$(git config --global user.email)"

# 3. pyproject.toml ìƒì„±
cat > pyproject.toml << EOF
[project]
name = "$PROJECT_NAME"
version = "0.1.0"
description = "FastAPI application"
authors = [
    { name = "$(git config user.name)", email = "$(git config user.email)" }
]
dependencies = [
    "fastapi>=0.104.1",
    "uvicorn>=0.23.2",
    "gunicorn>=21.2.0",
    "pydantic>=2.5.0",
    "python-multipart>=0.0.6",
]

[project.optional-dependencies]
dev = [
    "pytest>=7.4.0",
    "black>=23.0.0",
    "isort>=5.12.0",
    "flake8>=6.0.0",
    "mypy>=1.7.0",
]

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.hatch.build.targets.wheel]
packages = ["."]

[tool.pytest.ini_options]
testpaths = ["tests"]
python_files = ["test_*.py"]

[tool.black]
line-length = 88
target-version = ['py311']

[tool.isort]
profile = "black"
line_length = 88

[tool.flake8]
max-line-length = 88
extend-ignore = "E203, W503"

[tool.mypy]
python_version = "3.11"
warn_unused_configs = true
EOF

# 4. ê¸°ë³¸ FastAPI ì•± ìƒì„±
cat > main.py << EOF
from fastapi import FastAPI

app = FastAPI(
    title="$PROJECT_NAME",
    description="FastAPI application",
    version="0.1.0"
)

@app.get("/")
async def root():
    return {"message": "Hello World"}

@app.get("/health")
async def health():
    return {"status": "healthy"}
EOF

# 5. í…ŒìŠ¤íŠ¸ ë””ë ‰í† ë¦¬ ë° ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ìƒì„±
mkdir -p tests
cat > tests/__init__.py << EOF
# Tests package
EOF

cat > tests/test_main.py << EOF
from fastapi.testclient import TestClient
from main import app

client = TestClient(app)

def test_root():
    response = client.get("/")
    assert response.status_code == 200
    assert response.json() == {"message": "Hello World"}

def test_health():
    response = client.get("/health")
    assert response.status_code == 200
    assert response.json() == {"status": "healthy"}
EOF

# 6. Dockerfile ìƒì„±
cat > Dockerfile << EOF
FROM python:3.11-slim

# uv ì„¤ì¹˜
COPY --from=ghcr.io/astral-sh/uv:latest /uv /uvx /usr/local/bin/

WORKDIR /app

# ì˜ì¡´ì„± ì„¤ì¹˜
COPY pyproject.toml uv.lock* ./
RUN uv sync --frozen --no-dev

# ì•± ì½”ë“œ ë³µì‚¬
COPY . .

# ì•± ì‹¤í–‰
CMD ["uv", "run", "gunicorn", "-w", "4", "-k", "uvicorn.workers.UvicornWorker", "main:app", "-b", "0.0.0.0:8000"]
EOF

# 7. docker-compose.yml ìƒì„±
cat > docker-compose.yml << EOF
version: '3.8'

services:
  app:
    build: .
    ports:
      - "8000:8000"
    environment:
      - PYTHONPATH=/app
    volumes:
      - .:/app
    command: uv run uvicorn main:app --host 0.0.0.0 --port 8000 --reload
EOF

# 8. Makefile ìƒì„±
cat > Makefile << EOF
.PHONY: install dev test lint format clean

install:
	@echo "â–¶ uvë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜ì¡´ì„±ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤..."
	uv sync --dev

dev:
	@echo "â–¶ ê°œë°œ ì„œë²„ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤..."
	uv run uvicorn main:app --reload --host 0.0.0.0 --port 8000

test:
	@echo "â–¶ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤..."
	uv run pytest

lint:
	@echo "â–¶ ì½”ë“œ ë¦°íŒ…ì„ ì‹¤í–‰í•©ë‹ˆë‹¤..."
	uv run black --check .
	uv run isort --check-only .
	uv run flake8 .

format:
	@echo "â–¶ ì½”ë“œë¥¼ í¬ë§·íŒ…í•©ë‹ˆë‹¤..."
	uv run black .
	uv run isort .

clean:
	@echo "â–¶ ìºì‹œ ë° ì„ì‹œ íŒŒì¼ì„ ì •ë¦¬í•©ë‹ˆë‹¤..."
	rm -rf .pytest_cache
	rm -rf .mypy_cache
	rm -rf htmlcov
	find . -type d -name __pycache__ -exec rm -rf {} +
	find . -type f -name "*.pyc" -delete

docker-build:
	@echo "â–¶ Docker ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•©ë‹ˆë‹¤..."
	docker build -t $PROJECT_NAME .

docker-run:
	@echo "â–¶ Docker ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤..."
	docker run -p 8000:8000 $PROJECT_NAME

docker-compose-up:
	@echo "â–¶ Docker Composeë¡œ ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤..."
	docker-compose up -d

docker-compose-down:
	@echo "â–¶ Docker Compose ì„œë¹„ìŠ¤ë¥¼ ì¤‘ì§€í•©ë‹ˆë‹¤..."
	docker-compose down
EOF

# 9. .gitignore ìƒì„±
cat > .gitignore << EOF
# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
*.egg-info/
.installed.cfg
*.egg

# Virtual environments
.env
.venv
env/
venv/
ENV/
env.bak/
venv.bak/

# IDE
.vscode/
.idea/
*.swp
*.swo

# OS
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db

# Testing
.pytest_cache/
.coverage
htmlcov/
.tox/
.nox/
coverage.xml
*.cover
.hypothesis/

# mypy
.mypy_cache/
.dmypy.json
dmypy.json

# uv
.uv/
uv.lock

# Docker
.dockerignore
EOF

# 10. README.md ìƒì„±
cat > README.md << EOF
# $PROJECT_NAME

FastAPI ê¸°ë°˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. ì˜ì¡´ì„± ì„¤ì¹˜
\`\`\`bash
uv sync --dev
\`\`\`

### 2. ê°œë°œ ì„œë²„ ì‹¤í–‰
\`\`\`bash
make dev
# ë˜ëŠ”
uv run uvicorn main:app --reload --host 0.0.0.0 --port 8000
\`\`\`

### 3. Dockerë¡œ ì‹¤í–‰
\`\`\`bash
make docker-compose-up
\`\`\`

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

\`\`\`
$PROJECT_NAME/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ ci.yml              # GitHub Actions CI/CD
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ test_main.py            # í…ŒìŠ¤íŠ¸ íŒŒì¼
â”œâ”€â”€ main.py                     # FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜
â”œâ”€â”€ pyproject.toml              # uv í”„ë¡œì íŠ¸ ì„¤ì •
â”œâ”€â”€ uv.lock                     # ì˜ì¡´ì„± ì ê¸ˆ íŒŒì¼
â”œâ”€â”€ Dockerfile                  # Docker ì„¤ì •
â”œâ”€â”€ docker-compose.yml          # Docker Compose ì„¤ì •
â”œâ”€â”€ Makefile                    # ê°œë°œ ëª…ë ¹ì–´
â”œâ”€â”€ README.md                   # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â””â”€â”€ .gitignore                  # Git ë¬´ì‹œ íŒŒì¼
\`\`\`

## ğŸ› ï¸ ê°œë°œ ëª…ë ¹ì–´

- \`make install\` - ì˜ì¡´ì„± ì„¤ì¹˜
- \`make dev\` - ê°œë°œ ì„œë²„ ì‹¤í–‰
- \`make test\` - í…ŒìŠ¤íŠ¸ ì‹¤í–‰
- \`make lint\` - ì½”ë“œ ë¦°íŒ…
- \`make format\` - ì½”ë“œ í¬ë§·íŒ…
- \`make clean\` - ìºì‹œ ì •ë¦¬

## ğŸ”„ CI/CD

GitHub Actionsë¥¼ í†µí•œ ìë™í™”ëœ CI/CD íŒŒì´í”„ë¼ì¸ì´ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

- ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬ (linting, type checking)
- ìë™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
- Docker ì´ë¯¸ì§€ ë¹Œë“œ
- ë³´ì•ˆ ìŠ¤ìº”
EOF

# 11. GitHub Actions ì›Œí¬í”Œë¡œìš° ìƒì„±
mkdir -p .github/workflows
cat > .github/workflows/ci.yml << EOF
name: CI/CD Pipeline

on:
  push:
    branches:
      - main
      - develop
  pull_request:
    branches:
      - main
      - develop

env:
  PYTHON_VERSION: "3.11"
  UV_VERSION: "0.3.0"

jobs:
  lint:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: ["3.11", "3.12"]

    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Install uv
      uses: astral-sh/setup-uv@v1
      with:
        version: \${{ env.UV_VERSION }}

    - name: Set up Python \${{ matrix.python-version }}
      run: uv python install \${{ matrix.python-version }}

    - name: Install dependencies
      run: uv sync --dev

    - name: Run linting
      run: |
        uv run black --check .
        uv run isort --check-only .
        uv run flake8 .

    - name: Run type checking
      run: uv run mypy .

    - name: Run tests
      run: uv run pytest -v

  build:
    runs-on: ubuntu-latest
    needs: lint
    if: github.event_name == 'push' && github.ref == 'refs/heads/main'

    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Set up Docker Buildx
      uses: docker/setup-buildx-action@v3

    - name: Log in to GitHub Container Registry
      uses: docker/login-action@v3
      with:
        registry: ghcr.io
        username: \${{ github.actor }}
        password: \${{ secrets.GITHUB_TOKEN }}

    - name: Extract metadata (tags, labels) for Docker
      id: meta
      uses: docker/metadata-action@v5
      with:
        images: ghcr.io/\${{ github.repository }}
        tags: |
          type=ref,event=branch
          type=ref,event=pr
          type=sha,prefix={{branch}}-
          type=raw,value=latest,enable={{is_default_branch}}

    - name: Build and push Docker image
      uses: docker/build-push-action@v5
      with:
        context: .
        push: true
        tags: \${{ steps.meta.outputs.tags }}
        labels: \${{ steps.meta.outputs.labels }}
        cache-from: type=gha
        cache-to: type=gha,mode=max

  security-scan:
    runs-on: ubuntu-latest
    needs: lint
    if: github.event_name == 'push'

    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Install uv
      uses: astral-sh/setup-uv@v1
      with:
        version: \${{ env.UV_VERSION }}

    - name: Set up Python
      run: uv python install \${{ env.PYTHON_VERSION }}

    - name: Install dependencies
      run: uv sync --dev

    - name: Run security scan
      run: |
        uv run pip install safety bandit
        uv run safety check
        uv run bandit -r . -f json -o bandit-report.json || true

    - name: Upload security scan results
      uses: actions/upload-artifact@v4
      if: always()
      with:
        name: security-scan-results
        path: |
          bandit-report.json
        retention-days: 30
EOF

# 12. uv ì˜ì¡´ì„± ì„¤ì¹˜
echo "â–¶ uvë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜ì¡´ì„±ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤..."
uv sync --dev

# 13. ì²« ì»¤ë°‹
echo "â–¶ ì²« ì»¤ë°‹ì„ ìƒì„±í•©ë‹ˆë‹¤..."
git add .
git commit -m "Initial commit: init"

echo "âœ… FastAPI í”„ë¡œì íŠ¸ '$PROJECT_NAME' ì´ˆê¸°í™”ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!"
echo ""
echo "ğŸ“‹ ë‹¤ìŒ ë‹¨ê³„:"
echo "1. cd $PROJECT_NAME"
echo "2. make dev  # ê°œë°œ ì„œë²„ ì‹¤í–‰"
echo "3. GitHub ì €ì¥ì†Œ ìƒì„± í›„ ì—°ê²°"
echo "4. git remote add origin <ì €ì¥ì†ŒURL>"
echo "5. git push -u origin main"
```

## ğŸ¯ ì‚¬ìš©ë²•

### 1. **ìŠ¤í¬ë¦½íŠ¸ ë‹¤ìš´ë¡œë“œ ë° ì‹¤í–‰**
```bash
# ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬
chmod +x fastapi-init.sh

# í”„ë¡œì íŠ¸ ìƒì„±
./fastapi-init.sh my-awesome-api
```

### 2. **ìˆ˜ë™ ì´ˆê¸°í™” (ë‹¨ê³„ë³„)**
```bash
# 1. í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ ìƒì„±
mkdir my-project && cd my-project

# 2. Git ì´ˆê¸°í™”
git init
git config user.name "Your Name"
git config user.email "your.email@example.com"

# 3. pyproject.toml ìƒì„± (ìœ„ í…œí”Œë¦¿ ì‚¬ìš©)

# 4. ê¸°ë³¸ íŒŒì¼ë“¤ ìƒì„± (main.py, tests/, Dockerfile ë“±)

# 5. uv ì˜ì¡´ì„± ì„¤ì¹˜
uv sync --dev

# 6. ì²« ì»¤ë°‹
git add .
git commit -m "Initial commit: init"
```

## ğŸ”§ í”„ë¡œì íŠ¸ íƒ€ì…ë³„ í™•ì¥

### Django í”„ë¡œì íŠ¸
- `django-init.sh` ìŠ¤í¬ë¦½íŠ¸ ìƒì„±
- Django íŠ¹í™” ì„¤ì • íŒŒì¼ë“¤ ì¶”ê°€

### Flask í”„ë¡œì íŠ¸  
- `flask-init.sh` ìŠ¤í¬ë¦½íŠ¸ ìƒì„±
- Flask íŠ¹í™” ì„¤ì • íŒŒì¼ë“¤ ì¶”ê°€

### Node.js í”„ë¡œì íŠ¸
- `nodejs-init.sh` ìŠ¤í¬ë¦½íŠ¸ ìƒì„±
- package.json, npm/yarn ì„¤ì • ì¶”ê°€

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œë§Œ ì‹¤í–‰**: ì ˆëŒ€ ìƒìœ„ ë””ë ‰í† ë¦¬ì—ì„œ ì‹¤í–‰í•˜ì§€ ë§ ê²ƒ
2. **Git ì‚¬ìš©ì ì •ë³´ í™•ì¸**: ì‹¤í–‰ ì „ `git config --global user.name` ì„¤ì • í™•ì¸
3. **uv ì„¤ì¹˜ í™•ì¸**: `uv --version` ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜ ìƒíƒœ í™•ì¸
4. **Docker ì„¤ì¹˜ í™•ì¸**: Docker ë° Docker Compose ì„¤ì¹˜ ìƒíƒœ í™•ì¸

## ğŸš€ ìë™í™”ëœ ì´ˆê¸°í™”ì˜ ì¥ì 

- **ì¼ê´€ì„±**: ëª¨ë“  í”„ë¡œì íŠ¸ê°€ ë™ì¼í•œ êµ¬ì¡°ì™€ ì„¤ì •ì„ ê°€ì§
- **ì‹œê°„ ì ˆì•½**: ìˆ˜ë™ ì„¤ì • ì‹œê°„ì„ ëŒ€í­ ë‹¨ì¶•
- **ì‹¤ìˆ˜ ë°©ì§€**: ê²€ì¦ëœ í…œí”Œë¦¿ìœ¼ë¡œ ì‹¤ìˆ˜ ìµœì†Œí™”
- **í‘œì¤€í™”**: íŒ€ ë‚´ í”„ë¡œì íŠ¸ êµ¬ì¡° í‘œì¤€í™”