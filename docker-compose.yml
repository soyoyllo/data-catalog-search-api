services:
  data-catalog-search-api:
    build: .
    container_name: data-catalog-search-api
    restart: always
    ports:
      - "8000:8000"
    volumes:
      - ./faiss_indices:/app/faiss_indices
      - ./metadata:/app/metadata # metadata í´ë”ë„ ë³¼ë¥¨ìœ¼ë¡œ ì—°ê²°í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
    
    # --- ğŸ‘‡ [í•µì‹¬] ì—¬ê¸°ì— í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ---
    environment:
      # ì´ ë³€ìˆ˜ëŠ” ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ os.getenv("OPENMETADATA_BASE_URL")ë¡œ ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      - OPENMETADATA_BASE_URL=https://de4f5334deb3.ngrok-free.app/
      
    # --- ğŸ‘‡ [ìƒˆë¡œ ì¶”ê°€] ë„ì»¤ ë„¤íŠ¸ì›Œí¬ ì„¤ì • ---
    networks:
      - app_net
    
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"

# --- ğŸ‘‡ [ìƒˆë¡œ ì¶”ê°€] ë„¤íŠ¸ì›Œí¬ ì •ì˜ ---
networks:
  app_net:
    external: true  # OpenMetadataì˜ app_net ë„¤íŠ¸ì›Œí¬ë¥¼ ì‚¬ìš©