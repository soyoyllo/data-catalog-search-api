services:
  data-catalog-search-api:
    build: .
    container_name: data-catalog-search-api
    restart: always
    ports:
      - "8000:8000"
    volumes:
      - ./faiss_indices:/app/faiss_indices
      - ./metadata:/app/metadata # metadata 폴더도 볼륨으로 연결하는 것이 좋습니다.
      - ./.env:/app/.env:ro # 동적 URL 갱신을 위해 .env 파일을 마운트

    networks:
      - app_net
    
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"

# --- 👇 [새로 추가] 네트워크 정의 ---
networks:
  app_net:
    external: true  # OpenMetadata의 app_net 네트워크를 사용
